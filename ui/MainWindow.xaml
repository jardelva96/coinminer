<Window x:Class="Coinminer.Ui.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Coinminer UI (Preview)"
        Height="680" Width="1100"
        Background="{DynamicResource AppBackgroundBrush}"
        Foreground="{DynamicResource TextBrush}"
        FontFamily="Segoe UI Variable"
        WindowStartupLocation="CenterScreen"
        Closing="OnClosing">
    <Grid Margin="16">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Sidebar -->
        <Border Grid.Column="0"
                Background="{DynamicResource SidebarBrush}"
                CornerRadius="14"
                Padding="18"
                Margin="0,0,16,0">
            <DockPanel LastChildFill="True">
                <StackPanel DockPanel.Dock="Top" Margin="0,0,0,20">
                    <TextBlock Text="COINMINER" Foreground="{DynamicResource AccentBrush}" FontSize="18" FontWeight="Bold"/>
                    <TextBlock Text="Early adopter" Foreground="{DynamicResource SidebarMutedBrush}" FontSize="12" Margin="0,4,0,0"/>
                </StackPanel>

                <StackPanel DockPanel.Dock="Top">
                    <Button x:Name="NavMiner" Content="Miner" Tag="Miner" Click="OnNavClick"
                            Style="{StaticResource NavButton}" Background="{DynamicResource SidebarActiveBrush}"
                            Foreground="{DynamicResource SidebarTextBrush}" Margin="0,0,0,6"/>
                    <Button x:Name="NavStats" Content="Stats" Tag="Stats" Click="OnNavClick"
                            Style="{StaticResource NavButton}" Foreground="{DynamicResource SidebarMutedBrush}" Margin="0,0,0,6"/>
                    <Button x:Name="NavDevices" Content="Devices" Tag="Devices" Click="OnNavClick"
                            Style="{StaticResource NavButton}" Foreground="{DynamicResource SidebarMutedBrush}" Margin="0,0,0,6"/>
                    <Button x:Name="NavTransactions" Content="Transactions" Tag="Transactions" Click="OnNavClick"
                            Style="{StaticResource NavButton}" Foreground="{DynamicResource SidebarMutedBrush}" Margin="0,0,0,6"/>
                    <Separator Margin="0,12,0,12" Background="{DynamicResource SidebarHoverBrush}"/>
                    <Button x:Name="NavSupport" Content="Support" Tag="Support" Click="OnNavClick"
                            Style="{StaticResource NavButton}" Foreground="{DynamicResource SidebarMutedBrush}"/>
                </StackPanel>

                <StackPanel DockPanel.Dock="Bottom" Margin="0,20,0,0">
                    <Button Content="Join Telegram"
                            Style="{StaticResource SecondaryButton}"
                            Background="{DynamicResource SidebarHoverBrush}"
                            Foreground="{DynamicResource SidebarTextBrush}"
                            BorderBrush="{DynamicResource SidebarHoverBrush}"/>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Main content -->
        <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="8">
                <!-- Top bar -->
                <Border Style="{StaticResource Card}" Padding="12" Margin="0,0,0,16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                    <StackPanel Orientation="Horizontal">
                        <Border Background="{DynamicResource BadgeBgBrush}" CornerRadius="999" Padding="8,4">
                            <TextBlock Text="Early adopter" Foreground="{DynamicResource BadgeTextBrush}" FontWeight="SemiBold" FontSize="12"/>
                        </Border>
                        <TextBlock x:Name="BalanceTicker"
                                   Text="0 COINS"
                                   Foreground="{DynamicResource AccentBrush}"
                                   FontWeight="Bold"
                                   Margin="12,0,0,0"/>
                    </StackPanel>

                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text="Dark mode" Foreground="{DynamicResource MutedBrush}" Margin="0,0,8,0"/>
                            <ToggleButton x:Name="ThemeToggle" Checked="OnThemeToggleChanged" Unchecked="OnThemeToggleChanged"
                                          Style="{StaticResource TogglePill}" Margin="0,0,12,0"/>
                            <TextBlock Text="SEAN" FontWeight="SemiBold" Margin="0,0,12,0"/>
                            <Button Content="Sign out" Style="{StaticResource SecondaryButton}"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Views -->
                <Grid>
                    <!-- Miner -->
                    <StackPanel x:Name="MinerView" Visibility="Visible">
                        <UniformGrid Columns="3" Margin="0,0,0,16">
                            <Border Style="{StaticResource Card}" Margin="0,0,12,0">
                                <StackPanel>
                                    <TextBlock Text="Current balance" Foreground="{DynamicResource MutedBrush}"/>
                                    <TextBlock x:Name="BalanceValue" Text="0" FontSize="28" FontWeight="Bold"
                                               Foreground="{DynamicResource AccentBrush}" Margin="0,6,0,0"/>
                                    <TextBlock x:Name="BalanceFiat" Text="-" Foreground="{DynamicResource MutedBrush}"/>
                                </StackPanel>
                            </Border>

                            <Border Style="{StaticResource Card}" Margin="0,0,12,0">
                                <StackPanel>
                                    <TextBlock Text="Hashrate" Foreground="{DynamicResource MutedBrush}"/>
                                    <TextBlock x:Name="HashrateValue" Text="0 H/s" FontSize="28" FontWeight="Bold" Margin="0,6,0,0"/>
                                    <TextBlock x:Name="AttemptsValue" Text="0 attempts" Foreground="{DynamicResource MutedBrush}"/>
                                </StackPanel>
                            </Border>

                            <Border Style="{StaticResource Card}">
                                <StackPanel>
                                    <TextBlock Text="Blocks mined" Foreground="{DynamicResource MutedBrush}"/>
                                    <TextBlock x:Name="BlocksValue" Text="0" FontSize="28" FontWeight="Bold" Margin="0,6,0,0"/>
                                    <TextBlock x:Name="UptimeValue" Text="Uptime: 0m" Foreground="{DynamicResource MutedBrush}"/>
                                </StackPanel>
                            </Border>
                        </UniformGrid>

                        <Border Style="{StaticResource Card}" Margin="0,0,0,16">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="220"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="200"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0" Margin="0,0,16,0">
                                    <TextBlock Text="Status" Foreground="{DynamicResource MutedBrush}"/>
                                    <TextBlock x:Name="StatusValue" Text="Idle" FontWeight="SemiBold" Margin="0,6,0,0"/>
                                    <Button x:Name="StartStopButton" Content="Start mining" Click="OnStartStopClick"
                                            Style="{StaticResource PrimaryButton}" Margin="0,12,0,0"/>
                                    <Button x:Name="ApplySettingsButton" Content="Apply settings" Click="OnApplySettingsClick"
                                            Style="{StaticResource SecondaryButton}" Margin="0,8,0,0"/>
                                    <TextBlock x:Name="StatusDetailValue" Text="Waiting for start" Foreground="{DynamicResource MutedBrush}" FontSize="12" Margin="0,6,0,0"/>
                                    <TextBlock x:Name="MinerPathValue" Text="Miner: -" Foreground="{DynamicResource MutedBrush}" FontSize="12" Margin="0,6,0,0"/>
                                    <TextBlock x:Name="LastOutputValue" Text="Last output: -" Foreground="{DynamicResource MutedBrush}" FontSize="12" Margin="0,6,0,0"/>
                                </StackPanel>

                                <StackPanel Grid.Column="1">
                                    <TextBlock Text="Mining profile" Foreground="{DynamicResource MutedBrush}"/>
                                    <TextBlock x:Name="ProfileValue" Text="CPU: 0 H/s (SHA-256)" FontWeight="SemiBold" Margin="0,6,0,0"/>
                                    <TextBlock x:Name="ProfileDetailValue" Text="GPU: n/a" FontWeight="SemiBold" Margin="0,6,0,0"/>
                                    <WrapPanel Margin="0,10,0,0">
                                        <StackPanel Margin="0,0,12,10">
                                            <TextBlock Text="Mode" Foreground="{DynamicResource MutedBrush}"/>
                                            <ComboBox x:Name="ModeSelector" Width="150" SelectedIndex="0">
                                                <ComboBoxItem Content="Local (SHA-256)" Tag="local"/>
                                                <ComboBoxItem Content="Stratum (pool)" Tag="stratum"/>
                                                <ComboBoxItem Content="Solo (node)" Tag="solo"/>
                                            </ComboBox>
                                        </StackPanel>
                                        <StackPanel Margin="0,0,12,10">
                                            <TextBlock Text="Host" Foreground="{DynamicResource MutedBrush}"/>
                                            <TextBox x:Name="PoolHostBox" Width="160" Text="localhost"/>
                                        </StackPanel>
                                        <StackPanel Margin="0,0,12,10">
                                            <TextBlock Text="Port" Foreground="{DynamicResource MutedBrush}"/>
                                            <TextBox x:Name="PoolPortBox" Width="80" Text="8332"/>
                                        </StackPanel>
                                        <StackPanel Margin="0,0,12,10">
                                            <TextBlock Text="User" Foreground="{DynamicResource MutedBrush}"/>
                                            <TextBox x:Name="PoolUserBox" Width="140" Text="worker"/>
                                        </StackPanel>
                                        <StackPanel Margin="0,0,12,10">
                                            <TextBlock Text="Pass" Foreground="{DynamicResource MutedBrush}"/>
                                            <TextBox x:Name="PoolPassBox" Width="100" Text="x"/>
                                        </StackPanel>
                                        <StackPanel Margin="0,0,12,10">
                                            <TextBlock Text="Coin" Foreground="{DynamicResource MutedBrush}"/>
                                            <ComboBox x:Name="CoinSelector" Width="140" SelectedIndex="0">
                                                <ComboBoxItem Content="Bitcoin" Tag="bitcoin"/>
                                                <ComboBoxItem Content="Litecoin" Tag="litecoin"/>
                                                <ComboBoxItem Content="Dogecoin" Tag="dogecoin"/>
                                                <ComboBoxItem Content="Monero" Tag="monero"/>
                                                <ComboBoxItem Content="Ravencoin" Tag="ravencoin"/>
                                                <ComboBoxItem Content="Zcash" Tag="zcash"/>
                                            </ComboBox>
                                        </StackPanel>
                                        <StackPanel Margin="0,0,12,10">
                                            <TextBlock Text="Difficulty" Foreground="{DynamicResource MutedBrush}"/>
                                            <TextBox x:Name="DifficultyBox" Width="70" Text="4"/>
                                        </StackPanel>
                                        <StackPanel Margin="0,0,12,10">
                                            <TextBlock Text="Progress" Foreground="{DynamicResource MutedBrush}"/>
                                            <TextBox x:Name="ProgressBox" Width="90" Text="10000"/>
                                        </StackPanel>
                                    </WrapPanel>
                                    <WrapPanel Margin="0,10,0,0">
                                        <Button Content="Auto" Style="{StaticResource ChipButton}"/>
                                        <Button Content="Ethereum" Style="{StaticResource ChipButton}"/>
                                        <Button Content="Monero" Style="{StaticResource ChipButton}"/>
                                        <Button Content="Ravencoin" Style="{StaticResource ChipButton}"/>
                                        <Button Content="Zcash" Style="{StaticResource ChipButton}"/>
                                    </WrapPanel>
                                </StackPanel>

                                <StackPanel Grid.Column="2">
                                    <TextBlock Text="Payout coin" Foreground="{DynamicResource MutedBrush}"/>
                                    <TextBlock Text="BTC" FontWeight="Bold" FontSize="16" Margin="0,6,0,0"/>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,12,0,0">
                                        <TextBlock Text="Only mine when idle" Foreground="{DynamicResource MutedBrush}" Margin="0,0,8,0"/>
                                        <ToggleButton IsChecked="True" Style="{StaticResource TogglePill}"/>
                                    </StackPanel>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <Border Style="{StaticResource Card}">
                            <StackPanel>
                                <TextBlock Text="Recent activity" FontSize="14" FontWeight="SemiBold"/>
                                <ItemsControl ItemsSource="{Binding ActivityLog}" Margin="0,10,0,0">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="{DynamicResource ActivityBgBrush}" CornerRadius="8" Padding="10" Margin="0,0,0,8">
                                                <TextBlock Text="{Binding}"/>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource Card}" Margin="0,16,0,0">
                            <StackPanel>
                                <TextBlock Text="Wallet" FontSize="14" FontWeight="SemiBold"/>
                                <TextBlock Text="Address" Foreground="{DynamicResource MutedBrush}" Margin="0,8,0,0"/>
                                <TextBox x:Name="WalletAddressBox" Text="" TextChanged="OnWalletAddressChanged"/>
                                <TextBlock x:Name="WalletBalanceValue" Text="Balance: 0" Foreground="{DynamicResource MutedBrush}" Margin="0,6,0,0"/>
                                <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                                    <Button x:Name="CreateWalletButton" Content="Create wallet" Click="OnCreateWalletClick"
                                            Style="{StaticResource SecondaryButton}" Margin="0,0,8,0"/>
                                    <Button x:Name="SaveWalletButton" Content="Save wallet" Click="OnSaveWalletClick"
                                            Style="{StaticResource SecondaryButton}" Margin="0,0,8,0"/>
                                    <Button x:Name="OpenWalletButton" Content="Open wallet file" Click="OnOpenWalletClick"
                                            Style="{StaticResource SecondaryButton}"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                    <Button x:Name="UseWalletForPoolButton" Content="Use address for pool user" Click="OnUseWalletForPoolClick"
                                            Style="{StaticResource SecondaryButton}"/>
                                    <Button x:Name="SwitchToStratumButton" Content="Switch to Stratum" Click="OnSwitchToStratumClick"
                                            Style="{StaticResource SecondaryButton}" Margin="8,0,0,0"/>
                                </StackPanel>
                                <TextBlock x:Name="WalletStatusValue" Text="No wallet loaded" Foreground="{DynamicResource MutedBrush}" FontSize="12" Margin="0,8,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- Stats -->
                    <StackPanel x:Name="StatsView" Visibility="Collapsed">
                        <UniformGrid Columns="2" Margin="0,0,0,16">
                            <Border Style="{StaticResource Card}" Margin="0,0,12,0">
                                <StackPanel>
                                    <TextBlock Text="Hashrate" Foreground="{DynamicResource MutedBrush}"/>
                                    <TextBlock x:Name="StatsHashrateValue" Text="0 H/s" FontSize="26" FontWeight="Bold" Margin="0,6,0,0"/>
                                    <TextBlock x:Name="StatsAttemptsValue" Text="0 attempts" Foreground="{DynamicResource MutedBrush}"/>
                                </StackPanel>
                            </Border>
                            <Border Style="{StaticResource Card}">
                                <StackPanel>
                                    <TextBlock Text="Uptime" Foreground="{DynamicResource MutedBrush}"/>
                                    <TextBlock x:Name="StatsUptimeValue" Text="0m" FontSize="26" FontWeight="Bold" Margin="0,6,0,0"/>
                                    <TextBlock x:Name="StatsBlocksValue" Text="Blocks mined: 0" Foreground="{DynamicResource MutedBrush}"/>
                                </StackPanel>
                            </Border>
                        </UniformGrid>
                        <Border Style="{StaticResource Card}" Margin="0,0,0,16">
                            <StackPanel>
                                <TextBlock Text="Pool status" FontSize="14" FontWeight="SemiBold"/>
                                <TextBlock x:Name="StratumStatusValue" Text="Not connected" Foreground="{DynamicResource MutedBrush}" Margin="0,8,0,0"/>
                                <TextBlock x:Name="StratumDifficultyValue" Text="Difficulty: -" Foreground="{DynamicResource MutedBrush}" Margin="0,4,0,0"/>
                                <TextBlock x:Name="StratumNotifyValue" Text="Notify: 0" Foreground="{DynamicResource MutedBrush}" Margin="0,4,0,0"/>
                                <TextBlock x:Name="StratumSubmitValue" Text="Submit: 0 / 0" Foreground="{DynamicResource MutedBrush}" Margin="0,4,0,0"/>
                                <TextBlock x:Name="StratumBytesValue" Text="Traffic: 0 / 0" Foreground="{DynamicResource MutedBrush}" Margin="0,4,0,0"/>
                                <TextBlock x:Name="SoloStatusValue" Text="Solo: idle" Foreground="{DynamicResource MutedBrush}" Margin="0,6,0,0"/>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource Card}">
                            <StackPanel>
                                <TextBlock Text="Pool performance" FontSize="14" FontWeight="SemiBold"/>
                                <StackPanel Margin="0,10,0,0">
                                    <Border Background="{DynamicResource ActivityBgBrush}" CornerRadius="8" Padding="10" Margin="0,0,0,8">
                                        <TextBlock Text="pool1.example.com - 98.4% accepted (1,204 shares)"/>
                                    </Border>
                                    <Border Background="{DynamicResource ActivityBgBrush}" CornerRadius="8" Padding="10">
                                        <TextBlock Text="pool2.example.com - 96.8% accepted (892 shares)"/>
                                    </Border>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- Devices -->
                    <StackPanel x:Name="DevicesView" Visibility="Collapsed">
                        <Border Style="{StaticResource Card}" Margin="0,0,0,16">
                            <StackPanel>
                                <TextBlock Text="Devices" FontSize="14" FontWeight="SemiBold"/>
                                <StackPanel Margin="0,10,0,0">
                                    <Border Background="{DynamicResource ActivityBgBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,8">
                                        <StackPanel>
                                            <TextBlock Text="GPU 0 - NVIDIA RTX 3060" FontWeight="SemiBold"/>
                                            <TextBlock Text="Hashrate: 48 MH/s | Temp: 62C" Foreground="{DynamicResource MutedBrush}" FontSize="12"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Background="{DynamicResource ActivityBgBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,8">
                                        <StackPanel>
                                            <TextBlock Text="CPU - Ryzen 7 5700X" FontWeight="SemiBold"/>
                                            <TextBlock Text="Hashrate: 1.1 KH/s | Usage: 35%" Foreground="{DynamicResource MutedBrush}" FontSize="12"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Background="{DynamicResource ActivityBgBrush}" CornerRadius="8" Padding="12">
                                        <StackPanel>
                                            <TextBlock Text="GPU 1 - NVIDIA GTX 1660" FontWeight="SemiBold"/>
                                            <TextBlock Text="Hashrate: 22 MH/s | Temp: 68C" Foreground="{DynamicResource MutedBrush}" FontSize="12"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- Transactions -->
                    <StackPanel x:Name="TransactionsView" Visibility="Collapsed">
                        <Border Style="{StaticResource Card}">
                            <StackPanel>
                                <TextBlock Text="Transactions" FontSize="14" FontWeight="SemiBold"/>
                                <StackPanel Margin="0,10,0,0">
                                    <Border Background="{DynamicResource ActivityBgBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,8">
                                        <StackPanel>
                                            <TextBlock Text="+0.00042 BTC" FontWeight="SemiBold"/>
                                            <TextBlock Text="Paid to 3FZbgi... on 2026-01-04 14:22" Foreground="{DynamicResource MutedBrush}" FontSize="12"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Background="{DynamicResource ActivityBgBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,8">
                                        <StackPanel>
                                            <TextBlock Text="+0.00031 BTC" FontWeight="SemiBold"/>
                                            <TextBlock Text="Paid to 3FZbgi... on 2026-01-02 10:11" Foreground="{DynamicResource MutedBrush}" FontSize="12"/>
                                        </StackPanel>
                                    </Border>
                                    <Border Background="{DynamicResource ActivityBgBrush}" CornerRadius="8" Padding="12">
                                        <StackPanel>
                                            <TextBlock Text="+0.00028 BTC" FontWeight="SemiBold"/>
                                            <TextBlock Text="Paid to 3FZbgi... on 2025-12-30 08:04" Foreground="{DynamicResource MutedBrush}" FontSize="12"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- Support -->
                    <StackPanel x:Name="SupportView" Visibility="Collapsed">
                        <UniformGrid Columns="2" Margin="0,0,0,16">
                            <Border Style="{StaticResource Card}" Margin="0,0,12,0">
                                <StackPanel>
                                    <TextBlock Text="Documentation" FontWeight="SemiBold"/>
                                    <TextBlock Text="Setup guides, mining tips, FAQs" Foreground="{DynamicResource MutedBrush}" Margin="0,6,0,10"/>
                                    <Button Content="Open docs" Style="{StaticResource SecondaryButton}"/>
                                </StackPanel>
                            </Border>
                            <Border Style="{StaticResource Card}">
                                <StackPanel>
                                    <TextBlock Text="Live chat" FontWeight="SemiBold"/>
                                    <TextBlock Text="Talk to support in real time" Foreground="{DynamicResource MutedBrush}" Margin="0,6,0,10"/>
                                    <Button Content="Start chat" Style="{StaticResource SecondaryButton}"/>
                                </StackPanel>
                            </Border>
                        </UniformGrid>

                        <Border Style="{StaticResource Card}">
                            <StackPanel>
                                <TextBlock Text="Support tickets" FontSize="14" FontWeight="SemiBold"/>
                                <StackPanel Margin="0,10,0,0">
                                    <Border Background="{DynamicResource ActivityBgBrush}" CornerRadius="8" Padding="12" Margin="0,0,0,8">
                                        <TextBlock Text="No open tickets. Create a new one when needed." Foreground="{DynamicResource MutedBrush}"/>
                                    </Border>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Grid>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>
